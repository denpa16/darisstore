lint:ruff:
  stage: linter
  script:
    - docker pull ${CI_REGISTRY_IMAGE}/backend:${CI_COMMIT_SHA}
    - docker run --rm ${CI_REGISTRY_IMAGE}/backend:${CI_COMMIT_SHA} /bin/sh -c "poetry run ruff check . --statistics --config pyproject.toml"
  allow_failure: false
  rules:
    - if: $CI_COMMIT_BRANCH =~ /^(main|develop)$/ && $SKIP_TESTING == "false"
      changes:
        - backend/**/*
