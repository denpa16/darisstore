## Документация для запросов

### Туры

**1. Список туров**

**url**:
- ```api/tours?...```

**пример запроса:**

```https://tourmetria.tsacloud.com/api/tours/?pageSize=4&pageNumber=2&countryId=119&cityFromId=832&cities=&meals=&stars=&features=&s_nightsMin=2&s_nightsMax=5&currencyAlias=RUB&groupBy=hotelsPopularity&includeDescriptions=1&includeOilTaxesAndVisa=0&minHotelRating=0&s_showcase=false&templateName=&filterToursForType=0&excludeToursForType=0&filterToursForTransportType=0&beachLines=&f_to_id=&s_hotelIsNotInStop=true&s_hasTickets=true&s_ticketsIncluded=true&updateResult=1&visibleOperators=&hotels=&s_adults=3&s_kids=0&s_kids_ages=&s_departFrom=11%2F09%2F2023&s_departTo=24%2F09%2F2023&showHotelFacilities=1```


**params**:
- ```cityFromId: integer``` - ```ref_id``` города вылета (обязательно)
- ```countryId: integer``` - ```ref_id``` страны тура (обязательно)
- ```cities: string elements (через запятую без пробелов)``` - массив ```ref_id``` курортов (обязательно)
- ```meals: string elements (через запятую без пробелов)``` - массив ```ref_id``` типов питания (не обязательно)
- ```stars: string elements (через запятую без пробелов)``` - массив ```ref_id``` категорий отелей (не обязательно)
- ```hotels: string elements (через запятую без пробелов)``` - массив ```ref_id``` отелей (не обязательно)
- ```s_adults: integer``` - количество туристов-взрослых (не обязательно)
- ```s_kids: integer``` - количество туристов-взрослых (не обязательно)
- ```s_kids_ages: integer elements (через запятую без пробелов)``` - список возрастов детей, разделённых запятыми. Количество значению соответствует значению параметра ```s_kids``` (не обязательно)
- ```s_nightsMin: integer``` - минимальная продолжительность тура, ночей (не обязательно)
- ```s_nightsMax: integer``` - максимальная продолжительность тура, ночей (не обязательно)
- ```s_priceMin: integer``` - минимальная цена (не обязательно)
- ```s_priceMax: integer``` - максимальная цена (не обязательно)
- ```currencyAlias: string``` - Валюта параметров ```s_priceMin``` и ```s_PriceMax```. Допустимые значения: ```USD```, ```EUR```, ```RUR```, ```UAH```, ```BYN```, ```KZT```. По умолчанию: ```RUB``` (не обязательно)
- ```s_departFrom: string``` - Начальная дата диапазона дат вылета в формате ```DD/MM/YYYY```. По умолчанию: не текущая дата (не обязательно)
- ```s_departTo: string``` - Конечная дата диапазона дат вылета в формате ```DD/MM/YYYY```. По умолчанию: не текущая дата + 7 дней. Допустимый интервал между начальной и конечной датой диапазона — 45 дней (не обязательно)
- ```visibleOperators: string elements (через запятую без пробелов)``` - Список видимых туроператоров, разделение запятой. По умолчанию: не задан. (Данный параметр не рекомендуется использовать при создании поискового запроса.
Для отображения только выбранных туроператоров используйте параметры ```filter``` и ```f_to_id```.) (не обязательно)
- ```hiddenOperators: string elements (через запятую без пробелов)``` - 	Список скрытых туроператоров, разделение запятой. По умолчанию: не задан. (Данный параметр не рекомендуется использовать при создании поискового запроса.
Для отображения только выбранных туроператоров используйте параметры ```filter``` и ```f_to_id```.)
- ```calcFullPrice: bool``` - Учитывать топливный сбор. Если в ответе нужно учитывать топливный сбор, параметр передаёт значение ```1```; если допускаются цена без учёта топливного сбора – ```0```.
По умолчанию: ```0```. (не обязательно)
- ```s_hotelIsNotInStop: string``` - Наличие мест в отеле. Если в ответе нужны только отели с местами, параметр передаёт значение ```true```; в противном случае – ```false```. По умолчанию: ```false``` (не обязательно)
- ```s_hasTickets: string``` - Наличие билетов. Если в ответе нужны только туры с билетами, параметр передаёт значение ```true```; если допускаются туры без билетов – ```false```. По умолчанию: ```false``` (не обязательно)
- ```s_ticketsIncluded: string``` - Включен перелет или нет (объем турпакета).  Если в ответе нужны только туры с включённым перелётом, параметр передаёт значение “true”; если допускаются туры без перелёта – ```false```. По умолчанию: ```false``` (не обязательно)
- ```filter: string``` - Фильтрация данных ответа по туроператорам. Возможные значения: ```0``` — выключено; ```1``` — включено. Если фильтр включён, используются идентификаторы из параметра ```f_to_id```. По умолчанию: не задан (не обязательно)
- ```f_to_id: integer elements (через запятую без пробелов)``` - Идентификаторы туроператоров, подлежащих фильтрации. По умолчанию: не задан. Параметр работает только при покупке расширенной версии сервиса (не обязательно)
- ```pageSize: integer``` - Количество туров в ленте выдачи на одной странице. По умолчанию: не задан и выводит 20 туров (не обязательно)
- ```pageNumber: integer``` - Номер страницы в ленте выдачи. По умолчанию: не задан (не обязательно)
- ```includeDescriptions: bool``` - Включить в выдачу описания отеля, типов размещения и питания. Если в ответе нужны описания, параметр передаёт значение ```1```; если описания не нужны – ```0``` (не обязательно)
- ```economOnly: bool``` - Показывать туры с перелетом в экономическом классе. Варианты значений: ```1``` и ```0```. По умолчанию: не задан (не обязательно)
- ```includeOilTaxesAndVisa: bool``` - Топливные и визовые сборы. Если данные нужны в ответе, параметр передаёт значение ```true```; если не нужны – ```false```. По умолчанию: не задан. Передавать как ```1``` или ```0```
- ```beachLines: integer``` - пляжная линия, можно передавать через запятую. Возможные значения - ```1```, ```2```, ```3```, либо ничего не передавать
при первом запросе будет в ответ будет приходить структура данных следующего вида
```
{
    "request_id":2072343750,
    "tours_count":336,
    "hotels": [],
}
```

при каждой пагинации надо отправлять данный параметр в запрос
```
https://.../api/tours/?requestId=2072343750
```

**2. Детальная информация по туру**

**url**:
- ```api/tours/{tour_ref_id}/?pageSize=4&pageNumber=2&countryId=119&requestId=2117449963&hotels=12332```

**params**:
- ```requestId: str``` - тот же параметр с тем же значением, что пришел в api списка туров
- ```hotels: integer elements (через запятую без пробелов)``` - подставляем параметр и его значение ```hotel_ref_id``` из тура
- ```pageSize: integer``` - тот же параметр с тем же значением, что был в списке туров
- ```pageNumber: integer``` - тот же параметр с тем же значением, что был в списке туров

**пример запроса:**
https://tourmetria.tsacloud.com/api/tours/242468038/?pageSize=4&pageNumber=1&countryId=119&requestId=2117470298&hotels=83136

**3. Изображения отелей**

**url**:
- ```https://hotels.sletat.ru/i/p/{hotel_id}_{image_index}_{h}_{w}.jpg```

```
{hotel_id} – идентификатор отеля;
{image_index} – индексизображения отеля, начинается с 0 (по умолчанию брать 0);
{h} – высота изображения (максимальное значение 300);
{w} – требуемая ширина изображения (максимальное значение 300);
Изображения не предоставляются для неслинкованных отелей, а также для отелей с отсутствующим описанием```
```

**4. Информация о перелетах в туре**

**url**:
- ```api/tours/tour_flights/?sourceId=20&requestId=2117569373&offerId=257933379&currencyAlias=RUB```

**params**:
- ```requestId: str``` - тот же параметр с тем же значением, что пришел в api списка туров
- ```sourceId: str``` - ```touroperator_ref_id``` внешний id туроператора, из тура
- ```offerId: str``` - ```tour_ref_id``` внешний id тура, из тура
- ```currencyAlias: RUB``` - алиас валюты
